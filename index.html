<!-- DNI Call Tracking Tag: Healthcare Lander -->
<!-- Replace your phone numbers with this structure -->
 <head>
  <script type="text/javascript" src="https://cy9n0.rdtk.io/track.js?rtkcmpid=6883a9f9969fe3c7bd0bab49"></script>
 </head>
<span class="tracking-number">(555) 123-4567</span>
<header>
<!-- Or as a clickable link -->
<a href="tel:+15551234567" class="tracking-number">(555) 123-4567</a>

<!-- Place this script before closing </body> tag -->
<script>
(function() {
  'use strict';
  
  var DNI = {
    config: {
      tagCode: 'healthcare_lander',
      apiUrl: 'https://db49e81b-0f19-4f98-81dc-9b5f42c77491-00-229f5d5g77v1k.spock.replit.dev/api/dni/track',
      timeout: 5000,
      captureUserData: true,
      debug: false
    },
    
    init: function() {
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', this.replaceNumbers.bind(this));
      } else {
        this.replaceNumbers();
      }
    },
    
    replaceNumbers: function() {
      var elements = document.querySelectorAll('.tracking-number, [data-tracking-number]');
      if (elements.length === 0) {

        return;
      }
      
      this.getTrackingNumber(function(response) {
        if (response.success && response.formattedNumber) {
          for (var i = 0; i < elements.length; i++) {
            elements[i].textContent = response.formattedNumber;
            // Update href if it's a link
            if (elements[i].tagName === 'A') {
              elements[i].href = 'tel:' + response.phoneNumber;
            }
          }
        }
      });
    },
    
    getTrackingNumber: function(callback) {
      var requestData = {
        tagCode: this.config.tagCode,
        sessionId: this.getSessionId(),
        domain: window.location.hostname,
        referrer: document.referrer,
        userAgent: navigator.userAgent
      };
      
      if (this.config.captureUserData) {
        var urlParams = new URLSearchParams(window.location.search);
        // Standard UTM parameters
        requestData.utmSource = urlParams.get('utm_source');
        requestData.utmMedium = urlParams.get('utm_medium');
        requestData.utmCampaign = urlParams.get('utm_campaign');
        requestData.utmContent = urlParams.get('utm_content');
        requestData.utmTerm = urlParams.get('utm_term');
        
        // Custom URL parameters (auto-generated from configuration)
        requestData.publisher = urlParams.get('publisher');
        requestData.gclid = urlParams.get('gclid');
        requestData.fbclid = urlParams.get('fbclid');
        requestData.msclkid = urlParams.get('msclkid');
        requestData.ttclid = urlParams.get('ttclid');
        requestData.twclid = urlParams.get('twclid');
        requestData.liclid = urlParams.get('liclid');
        requestData.subid = urlParams.get('subid');
        requestData.clickid = urlParams.get('clickid');
        requestData.affid = urlParams.get('affid');
        requestData.pubid = urlParams.get('pubid');
        requestData.source = urlParams.get('source');
        requestData.medium = urlParams.get('medium');
        requestData.campaign = urlParams.get('campaign');
        requestData.content = urlParams.get('content');
        requestData.term = urlParams.get('term');
        requestData.keyword = urlParams.get('keyword');
        requestData.placement = urlParams.get('placement');
        requestData.adgroup = urlParams.get('adgroup');
        requestData.creative = urlParams.get('creative');
        requestData.device = urlParams.get('device');
        requestData.network = urlParams.get('network');
        requestData.matchtype = urlParams.get('matchtype');
        requestData.adposition = urlParams.get('adposition');
        requestData.target = urlParams.get('target');
        requestData.targetid = urlParams.get('targetid');
        requestData.loc_physical_ms = urlParams.get('loc_physical_ms');
        requestData.loc_interest_ms = urlParams.get('loc_interest_ms');
      }
      
      fetch(this.config.apiUrl, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(requestData),
        mode: 'cors'
      })
      .then(function(response) {
        return response.json();
      })
      .then(callback)
      .catch(function(error) {

      });
    },
    
    getSessionId: function() {
      var sessionId = sessionStorage.getItem('dni_session_id');
      if (!sessionId) {
        sessionId = 'dni_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        sessionStorage.setItem('dni_session_id', sessionId);
      }
      return sessionId;
    }
  };
  
  DNI.init();
})();
</script>